<%- include('partials/header', { title: 'Home' }) %>

<h2>Welcome, <%= username %>!</h2>

<form action="/newpost" method="post">
  <label for="title">Title:</label>
  <input type="text" name="title" id="title" required>

  <label for="content">Content:</label>
  <textarea name="content" id="content" required></textarea>

  <button type="submit">Add Post</button>
</form>

<hr>

<h3>Blog Posts</h3>

<% if (posts.length === 0) { %>
  <p>No posts yet. Be the first to write one!</p>
<% } else { %>
  <ul>
    <% posts.forEach((post, index) => { %>
      <li>
        <h4><%= post.title %></h4>
        <p>
          <%= post.content.length > 100 
                ? post.content.substring(0, 100) + '...' 
                : post.content %>
        </p>
        <a href="/post/<%= index %>">Read More</a>
      </li>
    <% }) %>
  </ul>
<% } %>

<%- include('partials/footer') %>
